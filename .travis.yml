language: python

python:
  - "2.7"
  - "3.6"

matrix:
  include:
    - language: generic
      os: osx

install:
  - mkdir -p ~/bin
  - curl https://raw.githubusercontent.com/pure-data/deken/master/developer/deken > ~/bin/deken
  - chmod u+x ~/bin/deken
  - mkdir tmp
  - curl -fsSL -o tmp/deken-test.zip "https://puredata.info/Members/zmoelnig/tests/deken-test.zip"
  - (cd tmp; unzip deken-test.zip; rm deken-test.zip)

script:
  - ~/bin/deken upgrade
  - ~/bin/deken package -v000.dekenci tmp/deken-test

after_script:
  - ls -l tmp/
